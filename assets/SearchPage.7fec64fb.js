import{Q as A}from"./QIcon.952c5aea.js";import{A as T,T as L,a as Q,b as C,h as G,s as I,i as V,c as B,g as q,Q as z,d as N,e as j,f as R}from"./TrackDetails.d574112c.js";import{Q as K}from"./focusout.4b54ca48.js";import{Q as M}from"./QPage.0b765fce.js";import{_ as w,B as a,I as r,K as _,J as v,L as s,H as m,E as i,A as P,r as c,C as U,D as d,V as D,a8 as E,a9 as F,aa as H,F as h,G as k,M as f}from"./index.f9fe59c2.js";import{Q as J}from"./QBtn.0840400b.js";import"./render.0bfea7fe.js";import"./axios.d1eda055.js";import"./utils.ba84adb1.js";const O={name:"ArtistsList",props:{artists:[]},data(){return{}},methods:{getDetails(e,t){console.log("get-artist-details",e,t),this.$emit("get-details",e,t)}}},W={role:"list",class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3"},X={class:"aspect-h-4 aspect-w-3 rounded-t-lg bg-gray-200 group-hover:opacity-75 sm:aspect-none sm:h-96"},Y=["src"],Z={class:"flex items-center space-x-3 px-6 pt-2 sm:px-4"},ee={class:"text-sm font-bold text-gray-900"},te={class:"inline-flex flex-shrink-0 items-center rounded-full bg-accent-100/20 px-1.5 py-0.5 text-xs font-medium text-gray-900 ring-1 ring-inset ring-accent-500"},se={class:"grid grid-cols-2 px-6 pb-6 pt-1 sm:px-4 sm:pb-4"},ae={class:""},ie={class:"flex flex-1 flex-col justify-end"},re={class:"text-sm italic text-gray-500"},le={class:""},oe={class:"place-self-end"};function ne(e,t,u,b,p,y){return a(),r("ul",W,[(a(!0),r(_,null,v(u.artists,l=>{var g;return a(),r("li",{key:l.id,class:"col-span-1 rounded-lg bg-white shadow"},[s("div",X,[(a(!0),r(_,null,v((g=l.images)==null?void 0:g.slice(0,1),n=>(a(),r("img",{class:"h-full w-full rounded-t-lg object-cover object-center bg-gray-300 sm:h-full sm:w-full",key:n.url,src:n.url,alt:""},null,8,Y))),128))]),s("div",null,[s("div",Z,[s("p",ee,m(l.name),1),s("span",te,m(l.popularity),1)]),s("div",se,[s("div",ae,[s("div",ie,[s("p",re,m(l.type),1),s("div",le,[(a(!0),r(_,null,v(l.genres,n=>(a(),r("span",{class:"text-sm text-gray-500",key:n},m(n+" "),1))),128))])])]),s("div",oe,[i(J,{color:"accent",icon:"more_horiz",flat:"",round:"",onClick:n=>y.getDetails(l.id,"artist")},null,8,["onClick"])])])])])}),128))])}var ce=w(O,[["render",ne]]);const de={name:"ArtistDetails",props:{artist:null},data(){return{}}},ue=["src"];function me(e,t,u,b,p,y){return a(),r("div",null,[s("iframe",{style:{"border-radius":"12px"},src:"https://open.spotify.com/embed/artist/"+u.artist.id+"?utm_source=generator&theme=0",width:"100%",height:"352",frameBorder:"0",allowfullscreen:"",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"},null,8,ue)])}var pe=w(de,[["render",me]]);const he=P({name:"SearchPage",components:{ArtistsList:ce,AlbumsList:T,TracksList:L,ArtistDetails:pe,AlbumDetails:Q,TrackDetails:C},data(){return{query:"",type:"album",items:[],item:Object,currentId:"",showDialog:c(!1),visible:c(!1)}},async mounted(){await this.newReleases()},methods:{async newReleases(){this.visible=c(!0);try{this.type="album";const e=await G();this.items=e.albums.items.sort(this.compareAlbums)}catch{this.visible=c(!1)}this.visible=c(!1)},async find(){this.visible=c(!0);try{const e=await I(this.query,this.type);this.isArtistSearch?this.items=e.artists.items.sort(this.compareArtists):this.isAlbumSearch?this.items=e.albums.items.sort(this.compareAlbums):this.isTrackSearch&&(this.items=e.tracks.items.sort(this.compareTracks))}catch{this.visible=c(!1)}this.visible=c(!1)},clear(){this.type="album",this.query="",this.newReleases()},async findDetails(){try{this.isArtistSearch?this.item=await V(this.currentId):this.isAlbumSearch?this.item=await B(this.currentId):this.isTrackSearch&&(this.item=await q(this.currentId))}catch(e){console.log(e)}},compareArtists(e,t){const u=e.popularity,b=t.popularity;let p=0;return u>b?p=1:u<b&&(p=-1),p*-1},compareAlbums(e,t){return Date.parse(new Date(e.release_date))-Date.parse(new Date(t.release_date))},compareTracks(e,t){return Date.parse(new Date(e.album.release_date))-Date.parse(new Date(t.album.release_date))},async onGetDetails(e,t){this.currentId=e,await this.findDetails(),this.showDialog=!0}},computed:{isArtistSearch(){return this.type==="artist"},isAlbumSearch(){return this.type==="album"},isTrackSearch(){return this.type==="track"},currentTitle(){var e="";return this.isArtistSearch?e="Artist":this.isAlbumSearch?e="Album":this.isTrackSearch&&(e="Track"),e}}}),fe={class:"mt-2 flex rounded-md px-4 py-5 lg:px-8"},be={class:"flex flex-1 shadow rounded-lg"},ge={class:"relative flex"},ye=s("option",{value:"artist"},"Artist",-1),_e=s("option",{value:"album"},"Album",-1),ve=s("option",{value:"track"},"Track",-1),ke=[ye,_e,ve],we={class:"relative flex-grow items-stretch focus-within:z-10"},Ae={key:0,class:"py-5 px-4 sm:px-6 lg:px-8"},De={key:1,class:"py-5 px-4 sm:px-6 lg:px-8"},xe={key:2,class:"py-5 px-4 sm:px-6 lg:px-8"},$e={key:0},Se={key:1},Te={key:2};function Le(e,t,u,b,p,y){const l=f("ArtistsList"),g=f("AlbumsList"),n=f("TracksList"),x=f("ArtistDetails"),$=f("AlbumDetails"),S=f("TrackDetails");return a(),U(M,null,{default:d(()=>[s("div",null,[s("div",fe,[s("div",be,[s("div",ge,[D(s("select",{id:"type",name:"type","onUpdate:modelValue":t[0]||(t[0]=o=>e.type=o),onChange:t[1]||(t[1]=o=>e.find()),class:"appearance-none relative pl-3 pr-7 font-semibold text-accent-500 border-none focus:ring-0 focus-within:bg-white open:bg-accent-100"},ke,544),[[E,e.type]])]),s("div",we,[D(s("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=o=>e.query=o),name:"query-input",id:"query-input",onKeydown:t[3]||(t[3]=H(o=>e.find(),["enter"])),class:"block w-full py-1.5 pl-4 text-gray-900 placeholder:text-gray-400 border-b-accent-500 border-b border-none focus:ring-0",placeholder:"Type to artists, albums and tracks"},null,544),[[F,e.query]])]),s("button",{type:"button",onClick:t[4]||(t[4]=o=>e.clear()),class:"relative -ml-px inline-flex items-center gap-x-1.5 rounded-full px-2 py-2 text-sm font-semibold text-accent-500 hover:bg-accent-300/20"},[i(A,{name:"backspace",color:"accent",size:"sm"})]),s("button",{type:"button",onClick:t[5]||(t[5]=o=>e.find()),class:"relative -ml-px inline-flex items-center gap-x-1.5 rounded-full px-2 py-2 text-sm font-semibold text-accent-500 hover:bg-accent-300/20"},[i(A,{name:"search",color:"accent",size:"sm"})])])])]),e.isArtistSearch?(a(),r("div",Ae,[i(l,{artists:e.items,onGetDetails:e.onGetDetails},null,8,["artists","onGetDetails"])])):h("",!0),e.isAlbumSearch?(a(),r("div",De,[i(g,{albums:e.items,onGetDetails:e.onGetDetails},null,8,["albums","onGetDetails"])])):h("",!0),e.isTrackSearch?(a(),r("div",xe,[i(n,{tracks:e.items,onGetDetails:e.onGetDetails},null,8,["tracks","onGetDetails"])])):h("",!0),i(N,{modelValue:e.showDialog,"onUpdate:modelValue":t[6]||(t[6]=o=>e.showDialog=o),"transition-show":"scale","transition-hide":"scale"},{default:d(()=>[i(K,{class:"bg-transparent text-black border-none shadow-none sm:w-5/6 w: 3/4"},{default:d(()=>[i(z,null,{default:d(()=>[e.isArtistSearch?(a(),r("div",$e,[i(x,{artist:e.item},{default:d(()=>[k(m(e.currentId),1)]),_:1},8,["artist"])])):h("",!0),e.isAlbumSearch?(a(),r("div",Se,[i($,{album:e.item},{default:d(()=>[k(m(e.currentId),1)]),_:1},8,["album"])])):h("",!0),e.isTrackSearch?(a(),r("div",Te,[i(S,{track:e.item},{default:d(()=>[k(m(e.currentId),1)]),_:1},8,["track"])])):h("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),i(R,{showing:e.visible},{default:d(()=>[i(j,{size:"20em",color:"accent"})]),_:1},8,["showing"])]),_:1})}var je=w(he,[["render",Le]]);export{je as default};
